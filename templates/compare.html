{% extends "layout.html" %}

{% block title %}
    My Compare Page
{% endblock %}

{% block styles %}
    {{ bootstrap.load_css() }}
{% endblock %}

{% block main %}
<link rel="stylesheet" href="/static/compare.css">
<div style="position: relative;">
    <div class="main-container "> 
        <div class="compare-items-container">
            <div class="compare-item item-hover" onclick="popout(this,true)">
                <svg class="svg-icon" style="width: 4em; height: 4em;vertical-align: middle;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M836 476H548V188c0-19.8-16.2-36-36-36s-36 16.2-36 36v288H188c-19.8 0-36 16.2-36 36s16.2 36 36 36h288v288c0 19.8 16.2 36 36 36s36-16.2 36-36V548h288c19.8 0 36-16.2 36-36s-16.2-36-36-36z"  /></svg>
            </div>
        </div>
        <div class="compare-items-container" >
            <div class="compare-item item-hover" onclick="popout(this,false)">
                <svg class="svg-icon" style="width: 4em; height: 4em;vertical-align: middle;overflow: hidden;" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M836 476H548V188c0-19.8-16.2-36-36-36s-36 16.2-36 36v288H188c-19.8 0-36 16.2-36 36s16.2 36 36 36h288v288c0 19.8 16.2 36 36 36s36-16.2 36-36V548h288c19.8 0 36-16.2 36-36s-16.2-36-36-36z"  /></svg>
            </div>
        </div>
    </div>
    <div id="select-popout" class="select-popout close">
        <div onclick="closeSelect()" style="width: 100%; height: 100%;position: fixed;">

        </div>    
        <div style="position: fixed; display:flex; justify-content: center; top: 20%;left: 50%; transform: translate(-50%, -50%);">
        <div class="dropdown">
            <input type="search" id="dropdown" onclick="dropdown()" oninput="instantSearch(this)" placeholder="Search Now">
            <label class="dropdown__face" for="dropdown">
                <div class="dropdown__text"></div>
            </label>

            <snap id="dropdown__items" class="dropdown__items">
                <ul class="dropdown_ul_items">
                    {% for digimon in digimons %}
                        <li onclick="selectDigiMon('{{digimon[0]}}')">{{digimon[0]}}</li>
                    {% endfor %}
                </ul>
                
            </snap>
        </div>

        <svg class="goo-svg">
            <filter id="goo">
                <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
                <feColorMatrix in="blur" type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7"
                    result="goo" />
                <feBlend in="SourceGraphic" in2="goo" />
            </filter>
        </svg>
    </div>
    </div>
</div>
<script>
    var selectedElement = null; //true(left) or false(right)
    var leftPopulate = false;
    var rightPopulate = false;

    function popout(event, isLeft){
        if(isLeft){
            leftPopulate = true;
        }else{
            rightPopulate = true;
        }
        selectedElement = event;
        var ele = document.getElementById("select-popout");
        ele.classList.toggle("close");
    }

    function closeSelect(){
        var dropdownEle = document.getElementById("dropdown__items");
        dropdownEle.classList.remove("add-dropdown");
        var ele = document.getElementById("select-popout");
        ele.classList.add("close");
        
    }
    function dropdown(){
        var ele = document.getElementById("dropdown__items");
        ele.classList.add("add-dropdown");
    }

    function instantSearch(event){
        console.log(event.value);
    }

    function selectDigiMon(digimonName){
        var newEle = document.createElement("div");
        newEle.innerText  = digimonName;
        console.log(newEle);
        console.log(selectedElement);
        selectedElement.replaceChildren(newEle);
        closeSelect();
    }

    function compare(){
        
    }
</script>
{% endblock %}

{% block scripts %}

    {{ bootstrap.load_js() }}
{% endblock %}
